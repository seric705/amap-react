(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{124:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),c=n(136),i=n(415);function o(e){const[t,n]=Object(a.useState)(!1);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginBottom:4}},r.a.createElement("span",null,"\u67e5\u770b\u6e90\u4ee3\u7801\uff1a"),r.a.createElement(i.a,{checked:t,onChange:e=>n(e)})),t&&r.a.createElement(c.a,null,e.children))}},126:function(e,t,n){"use strict";var a=n(2),r=n(0),c=n.n(r),i=n(410),o=n(134),l=n(123),s=(n(47),c.a.forwardRef((function(e,t){var n=e.hideControl,s=e.renderControl,u=void 0===s?function(){return null}:s,d=Object(r.useRef)(void 0);Object(r.useImperativeHandle)(t,(function(){return d.current}),[d.current]);var m=Object(r.useState)(14),p=m[0],b=m[1],O=Object(r.useState)([116.473778,39.990661]),h=O[0],j=O[1],y=Object(r.useCallback)((function(t){t.setFitView(null,!0),e.onMapComplete&&e.onMapComplete(t)}),[]),f=Object(r.useCallback)((function(t,n){e.onMapClick&&e.onMapClick(t,n)}),[]),g=Object.assign({viewMode:"3D",mapStyle:"amap://styles/whitesmoke",isHotspot:!1,showIndoorMap:!1,center:h,zoom:p,onZoomChange:Object(r.useCallback)((function(e){return b(e.getZoom())}),[]),onMapMove:Object(r.useCallback)((function(e){var t=e.getCenter();j([t.getLng(),t.getLat()])}),[])},e.mapOptions),v=Object.assign({width:"100%",height:"400px"},e.mapStyle),C=u();return c.a.createElement(o.a,null,(function(){return c.a.createElement("div",{className:"demo-view",style:{width:"100%"}},!n&&c.a.createElement(i.a,{className:"control",layout:"inline",size:"small",style:{padding:"10px 0px",position:"relative"}},C),c.a.createElement("div",{className:"map",style:v},c.a.createElement(l.a,Object(a.a)({ref:d},g,{onComplete:y,onClick:f}),e.children)))}))})));t.a=s},393:function(e){e.exports=JSON.parse('[{"center":[113.665412,34.757975],"radius":6},{"center":[113.280637,23.125178],"radius":5},{"center":[111.670801,40.818311],"radius":7},{"center":[126.642464,45.756967],"radius":9},{"center":[87.617733,43.792818],"radius":9},{"center":[114.298572,30.584355],"radius":2},{"center":[123.429096,41.796767],"radius":2},{"center":[117.000923,36.675807],"radius":3},{"center":[118.767413,32.041544],"radius":8},{"center":[108.948024,34.263161],"radius":5},{"center":[121.472644,31.231706],"radius":8},{"center":[106.713478,26.578343],"radius":2},{"center":[106.504962,29.533155],"radius":2},{"center":[91.132212,29.660361],"radius":8},{"center":[117.283042,31.86119],"radius":3},{"center":[119.306239,26.075302],"radius":3},{"center":[112.982279,28.19409],"radius":2},{"center":[110.33119,20.031971],"radius":3},{"center":[101.778916,36.623178],"radius":8},{"center":[108.320004,22.82402],"radius":2},{"center":[106.278179,38.46637],"radius":2},{"center":[115.892151,28.676493],"radius":7},{"center":[120.153576,30.287459],"radius":2},{"center":[114.502461,38.045474],"radius":2},{"center":[114.173355,22.320048],"radius":3},{"center":[121.509062,25.044332],"radius":7},{"center":[113.54909,22.198951],"radius":2},{"center":[103.823557,36.058039],"radius":8},{"center":[104.065735,30.659462],"radius":4},{"center":[125.3245,43.886841],"radius":3},{"center":[117.190182,39.125596],"radius":9},{"center":[102.712251,25.040609],"radius":2},{"center":[116.405285,39.904989],"radius":4},{"center":[112.549248,37.857014],"radius":8}]')},94:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return O})),n.d(t,"metadata",(function(){return h})),n.d(t,"rightToc",(function(){return j})),n.d(t,"default",(function(){return f}));var a=n(2),r=n(6),c=n(0),i=n.n(c),o=n(121),l=n(126),s=n(410),u=n(412),d=n(123),m=n(393),p=function(){var e=Object(c.useState)(.5),t=e[0],n=e[1];return i.a.createElement(l.a,{renderControl:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a.Item,{label:"opacity"},i.a.createElement(u.a,{min:0,max:1,step:.1,value:t,onChange:function(e){return n(e)},style:{width:"150px"}})))},mapOptions:{center:[116.306206,39.975468],zoom:3}},i.a.createElement(d.j,{opacity:t,bounds:[[116.327911,39.939229],[116.342659,39.946275]],render:function(e,t){var n=window.AMap.Browser.retina,a=t.getSize(),r=a.width,c=a.height;e.style.width=r+"px",e.style.height=c+"px",n&&(r*=2,c*=2),e.width=r,e.height=c;var i=e.getContext("2d");i.fillStyle="#08f",i.strokeStyle="#fff",i.beginPath();for(var o=0;o<m.length;o+=1){var l=m[o].center,s=t.lngLatToContainer(l),u=m[o].radius;n&&(s=s.multiplyBy(2),u*=2),i.moveTo(s.x+u,s.y),i.arc(s.x,s.y,u,0,2*Math.PI)}i.lineWidth=n?6:3,i.closePath(),i.stroke(),i.fill()}}))},b=n(124),O={title:"CustomLayer"},h={unversionedId:"references/layers/custom/custom-layer",id:"references/layers/custom/custom-layer",isDocsHomePage:!1,title:"CustomLayer",description:"\u7ee7\u627f\u81ea BaseCustomLayer",source:"@site/docs/references/layers/custom/custom-layer.md",slug:"/references/layers/custom/custom-layer",permalink:"/amap-react/docs/references/layers/custom/custom-layer",version:"current",sidebar:"docs",previous:{title:"CanvasLayer",permalink:"/amap-react/docs/references/layers/custom/canvas-layer"},next:{title:"WorldLayer",permalink:"/amap-react/docs/references/layers/district/world"}},j=[{value:"Props",id:"props",children:[]},{value:"Events",id:"events",children:[]},{value:"Example",id:"example",children:[]}],y={rightToc:j};function f(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},y,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"\u7ee7\u627f\u81ea ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"./base-custom-layer"}),"BaseCustomLayer")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"<CustomLayer\n  render={(canvas) => {\n    // ...\n  }}\n/>\n")),Object(o.b)(p,{mdxType:"ExampleCustomLayer"}),Object(o.b)("p",null,Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"#example"}),"Source Code")),Object(o.b)("h2",{id:"props"},"Props"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u5c5e\u6027\u540d"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u7c7b\u578b"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u5907\u6ce8"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"render")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"(canvas: HTMLCanvasElement) => void")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"...\u7ee7\u627f\u7684\u5c5e\u6027")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null})),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}))))),Object(o.b)("h2",{id:"events"},"Events"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u4e8b\u4ef6\u540d"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u5907\u6ce8"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null})),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}))))),Object(o.b)("h2",{id:"example"},"Example"),Object(o.b)(b.a,{mdxType:"CodeBlock"},"import React, { useState } from 'react';\nimport DemoView from '../DemoView';\nimport { Form, Slider } from 'antd';\nimport { CustomLayer } from '@amap/amap-react';\nimport DATA from '../../static/data/custom-layer-data.json';\n\nconst ExampleCustomLayer = () => {\n  const [opacity, setOpacity] = useState(0.5);\n\n  const render = (canvas, map) => {\n    const { retina } = window.AMap.Browser;\n    let { width, height } = map.getSize();\n\n    canvas.style.width = width + 'px';\n    canvas.style.height = height + 'px';\n    if (retina) {\n      // \u9ad8\u6e05\u9002\u914d\n      width *= 2;\n      height *= 2;\n    }\n    canvas.width = width;\n    canvas.height = height; // \u6e05\u9664\u753b\u5e03\n    const ctx = canvas.getContext('2d');\n    ctx.fillStyle = '#08f';\n    ctx.strokeStyle = '#fff';\n    ctx.beginPath();\n    for (let i = 0; i < DATA.length; i += 1) {\n      const center = DATA[i].center;\n      let pos = map.lngLatToContainer(center);\n      let r = DATA[i].radius;\n      if (retina) {\n        pos = pos.multiplyBy(2);\n        r *= 2;\n      }\n      ctx.moveTo(pos.x + r, pos.y);\n      ctx.arc(pos.x, pos.y, r, 0, 2 * Math.PI);\n    }\n    ctx.lineWidth = retina ? 6 : 3;\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n  };\n\n  const renderControl = () => {\n    return (\n      <>\n        <Form.Item label=\"opacity\">\n          <Slider\n            min={0}\n            max={1}\n            step={0.1}\n            value={opacity}\n            onChange={(v) => setOpacity(v)}\n            style={{ width: '150px' }}\n          />\n        </Form.Item>\n      </>\n    );\n  };\n\n  return (\n    <DemoView\n      renderControl={renderControl}\n      mapOptions={{\n        center: [116.306206, 39.975468],\n        zoom: 3,\n      }}\n    >\n      <CustomLayer\n        opacity={opacity}\n        bounds={[\n          [116.327911, 39.939229],\n          [116.342659, 39.946275],\n        ]}\n        render={render}\n      />\n    </DemoView>\n  );\n};\n\nexport default ExampleCustomLayer;\n"))}f.isMDXComponent=!0}}]);